<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>Web Coding Design Pattern｜Mochitecture</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <meta name="description" content="Mochitecture のミニサイト開発で使う Web コーディングのデザインパターン集。レイアウト・CSS・JS・ファイル構成・コメントの書き方をひとまとめにした設計メモ。">
  <meta property="og:title" content="Web Coding Design Pattern｜Mochitecture">
  <meta property="og:description" content="抽象の言語化→UI→Web実装を最小で最速にするための、Mochitecture の Web コーディング設計メモ。">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://homepage-virid-zeta.vercel.app/patterns">
  <meta property="og:image" content="https://homepage-virid-zeta.vercel.app/mochitecture_icon.png">
  <meta name="twitter:card" content="summary">
  <link rel="icon" type="image/png" href="/mochitecture_icon.png">

  <!-- 共通スタイル -->
  <link rel="stylesheet" href="/assets/base.css?v=20251110a">

  <!-- ページ固有スタイル：テキスト用のレイアウトだけ軽く追加 -->
  <style>
    /*
      patterns.html

      Pattern:
        - Docs Pattern（設計メモ / コーディング規約のまとめページ）
        - base.css の .site-main / .wrap / .page-title を前提に、
          テキストを読みやすく並べるための軽いレイアウトのみを追加

      Notes:
        - このページには JS は基本的に不要（include.js のみ）
        - 内容は将来の自分・コラボ相手への「読み方ガイド」として使う
    */

    .doc-main {
      max-width: 960px;
      margin: 0 auto;
      padding: 32px 20px 48px;
    }

    .doc-lead {
      margin: 0 0 16px;
      font-size: 0.95rem;
      line-height: 1.7;
      opacity: 0.9;
    }

    .doc-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr);
      gap: 16px;
    }

    @media (min-width: 960px) {
      .doc-grid {
        grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
        align-items: flex-start;
      }
    }

    .doc-card {
      background: var(--card);
      border-radius: 16px;
      box-shadow: var(--shadow);
      padding: 16px 18px 14px;
    }

    .doc-card h2 {
      margin: 0 0 8px;
      font-size: 1.05rem;
    }

    .doc-card h3 {
      margin: 18px 0 6px;
      font-size: 0.95rem;
    }

    .doc-card p {
      margin: 4px 0 8px;
      font-size: 0.9rem;
      line-height: 1.7;
    }

    .doc-card ul {
      margin: 4px 0 8px 1.1rem;
      padding: 0;
      font-size: 0.9rem;
    }

    .doc-card li {
      margin: 2px 0 0;
      line-height: 1.6;
    }

    .doc-tagline {
      font-size: 0.8rem;
      opacity: 0.8;
      margin-top: 2px;
    }

    .doc-inline-label {
      font-size: 0.82rem;
      font-weight: 600;
      opacity: 0.9;
      display: inline-block;
      margin-right: 4px;
    }

    .doc-code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", "Courier New", monospace;
      font-size: 0.8rem;
      line-height: 1.6;
      padding: 8px 10px;
      border-radius: 8px;
      background: rgba(15, 23, 42, 0.04);
      overflow-x: auto;
      margin: 4px 0 8px;
    }

    @media (prefers-color-scheme: dark) {
      .doc-code {
        background: rgba(15, 23, 42, 0.7);
      }
    }

    .doc-section-title {
      margin: 26px 0 10px;
      font-size: 0.9rem;
      font-weight: 600;
      opacity: 0.9;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .doc-checklist {
      padding-left: 1.1rem;
      font-size: 0.9rem;
    }

    .doc-checklist li + li {
      margin-top: 4px;
    }

    .doc-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.06);
      font-size: 0.7rem;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      margin-right: 6px;
    }

    .doc-mono {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", "Courier New", monospace;
      font-size: 0.82rem;
    }
  </style>

  <script defer src="/assets/include.js"></script>
</head>
<body>
  <div data-include="/partials/header.html"></div>

  <main class="site-main">
    <div class="doc-main">
      <header>
        <h1 class="page-title">Web Coding Design Pattern</h1>
        <p class="doc-lead">
          Mochitecture のミニサイトを「後から読みやすく・拡張しやすく」するためのコーディングパターン集です。
          HTML / CSS / JS / ファイル構成 / コメントの書き方をひとまとめにしておき、
          未来の自分やコラボする人がコードを読むときのガイドブックとして使うことを想定しています。
        </p>
      </header>

      <div class="doc-grid">
        <!-- 左カラム：全体方針＋レイアウト／CSS -->
        <section class="doc-card">
          <h2>01. 全体ポリシー</h2>
          <p>
            <span class="doc-inline-label">目的</span>
            「最小の構成で、増やしやすい」ことを優先する。フレームワークには依存せず、
            プレーン HTML / CSS / JS で組み立てる。
          </p>
          <p>
            <span class="doc-inline-label">対象</span>
            <span class="doc-mono">index.html</span> /
            <span class="doc-mono">archive.html</span> /
            <span class="doc-mono">about.html</span> /
            <span class="doc-mono">contact.html</span> と、
            <span class="doc-mono">/demos/**</span> 配下の UI 実験ページ。
          </p>

          <div class="doc-section-title">Layout Pattern</div>
          <p>ページの骨組みはすべて同じ構造を使う：</p>
          <div class="doc-code">
&lt;body&gt;
  &lt;div data-include="/partials/header.html"&gt;&lt;/div&gt;

  &lt;main class="site-main"&gt;
    &lt;div class="wrap"&gt;
      &lt;h1 class="page-title"&gt;Page Title&lt;/h1&gt;
      &lt;!-- ページ固有の内容 --&gt;
    &lt;/div&gt;
  &lt;/main&gt;

  &lt;div data-include="/partials/footer.html"&gt;&lt;/div&gt;
&lt;/body&gt;
          </div>
          <ul>
            <li><span class="doc-mono">header.html / footer.html</span> は <span class="doc-mono">/partials/</span> で共通化。</li>
            <li>レイアウトは <span class="doc-mono">assets/base.css</span> の <span class="doc-mono">.site-main</span> / <span class="doc-mono">.wrap</span> を基本とする。</li>
            <li>個別ページで微調整したい場合は、body クラス（例：<span class="doc-mono">body.calendar-page</span>）で上書き。</li>
          </ul>

          <div class="doc-section-title">CSS Pattern</div>
          <p>CSS は <strong>「共通レイヤ」と「ページ固有レイヤ」</strong>を分ける。</p>
          <ul>
            <li><span class="doc-mono">/assets/base.css</span>：色・タイポグラフィ・カード・ボタン・レイアウトなど共通。</li>
            <li>ページ固有：<span class="doc-mono">/demos/**/styles.css</span> や、シンプルなページなら <span class="doc-mono">&lt;style&gt;</span> に小さく書いて完結。</li>
            <li>コンポーネント単位でセレクタをグループ化（例：<span class="doc-mono">.calendar-*</span> / <span class="doc-mono">.em-*</span>）。</li>
          </ul>

          <p class="doc-tagline">
            → 「どの CSS を見ればいいか」が迷子にならないように、ページ名や機能名で名前空間を切っていく。
          </p>

          <div class="doc-section-title">JS Pattern（ざっくり）</div>
          <ul>
            <li><span class="doc-mono">/assets/include.js</span>：ヘッダー/フッターのインクルード＋ナビの active 判定＋フッター年号。</li>
            <li>デモ用 JS は <span class="doc-mono">/demos/calender/app.js</span> や <span class="doc-mono">/demos/energy-map/energy-map.js</span> のように機能ごとに分ける。</li>
            <li>即時関数・状態オブジェクト・描画関数という3レイヤで書く（詳細は下のセクション）。</li>
          </ul>
        </section>

        <!-- 右カラム：ファイル構成／コメントパターン／チェックリスト -->
        <section class="doc-card">
          <h2>02. ファイル構成 &amp; コードコメント</h2>

          <div class="doc-section-title">File / Folder Pattern</div>
          <ul>
            <li><span class="doc-mono">index.html</span>：Top</li>
            <li><span class="doc-mono">archive.html</span>：Archive 一覧</li>
            <li><span class="doc-mono">about.html</span>：About</li>
            <li><span class="doc-mono">contact.html</span>：Contact</li>
            <li><span class="doc-mono">/partials/header.html, footer.html</span>：共通レイアウト</li>
            <li><span class="doc-mono">/assets/base.css</span>：共通スタイル</li>
            <li><span class="doc-mono">/assets/include.js</span>：共通 JS</li>
            <li><span class="doc-mono">/demos/calender/**</span>：スケジュール UI 実験</li>
            <li><span class="doc-mono">/demos/energy-map/**</span>：Energy Map UI 実験</li>
            <li><span class="doc-mono">patterns.html</span>：この設計メモ</li>
          </ul>

          <div class="doc-section-title">Comment Header Pattern</div>
          <p>各ファイルの先頭には「読み方」をまとめたコメントを書く：</p>

          <p><span class="doc-badge">HTML</span></p>
          <div class="doc-code">
&lt;!--
  archive.html
  Pattern:
    - Archive Pattern（過程のスナップショット一覧）
  Notes:
    - 1カード = 1ミニプロジェクト
    - 本文は「before / how / after」の3行でそろえる
--&gt;
          </div>

          <p><span class="doc-badge">CSS</span></p>
          <div class="doc-code">
/*
  /demos/energy-map/energy-map.css
  Pattern:
    - Demo CSS Pattern（データビュー UI 向け）
    - .em-* 名前空間の下にスタイルを閉じ込める
  Notes:
    - SVG マップ／マーケットパネル／Data&amp;License を
      コンポーネント単位で分離
*/
          </div>

          <p><span class="doc-badge">JS</span></p>
          <div class="doc-code">
/**
 * /demos/calender/app.js
 *
 * Pattern:
 *   - Demo JS Pattern（設定 → 状態 → DOM参照 → ユーティリティ → 描画 → イベント）
 * Role:
 *   - 週ビューカレンダーの UI ロジック
 * Notes:
 *   - 本番コードではなく UI 実験用。読みやすさ優先。
 */
          </div>

          <p class="doc-tagline">
            → 最初の数行を読むだけで「何のファイルか」「どこから読み始めればいいか」がわかる状態にしておく。
          </p>
        </section>
      </div>

      <!-- 下段：JS 構造パターンとチェックリスト -->
      <section class="doc-card" style="margin-top:16px;">
        <h2>03. JS 設計パターン（Demo 向け）</h2>

        <div class="doc-section-title">構造の型</div>
        <p>
          デモ用の JS（<span class="doc-mono">calender/app.js</span> / <span class="doc-mono">energy-map.js</span>）は、
          おおよそ次の順番で書く：
        </p>
        <ol class="doc-checklist">
          <li><strong>設定</strong>：定数・ステップ幅・色など（<span class="doc-mono">STEP_MIN</span>, <span class="doc-mono">COLORS</span>）。</li>
          <li><strong>状態</strong>：<span class="doc-mono">events</span>, <span class="doc-mono">state</span>, <span class="doc-mono">currentMonday</span> など。</li>
          <li><strong>DOM 参照</strong>：<span class="doc-mono">const calendar = $('#calendar')</span> のような変数群。</li>
          <li><strong>ユーティリティ関数</strong>：日付変換・フォーマット（<span class="doc-mono">toKey</span>, <span class="doc-mono">minutes</span> など）。</li>
          <li><strong>描画関数</strong>：<span class="doc-mono">render()</span>, <span class="doc-mono">drawNowLine()</span>, <span class="doc-mono">place()</span> など。</li>
          <li><strong>イベント登録</strong>：クリック・ドラッグ・フォーム送信など。</li>
          <li><strong>初期化</strong>：<span class="doc-mono">renderLegend()</span>, <span class="doc-mono">render()</span> の呼び出し。</li>
        </ol>

        <div class="doc-section-title">新しいデモを追加するときのチェックリスト</div>
        <ul class="doc-checklist">
          <li><span class="doc-mono">/demos/&lt;name&gt;/index.html</span> を作る（ヘッダー/フッターは <span class="doc-mono">data-include</span> で読み込み）。</li>
          <li>ページ固有の CSS を <span class="doc-mono">/demos/&lt;name&gt;/styles.css</span> に切り出す。</li>
          <li>JS を書く場合は <span class="doc-mono">/demos/&lt;name&gt;/app.js</span> などにまとめる。</li>
          <li>各ファイルの先頭に「Pattern / Role / Notes」をコメントで書く。</li>
          <li>必要であれば <span class="doc-mono">archive.html</span> にカードを追加してリンクする。</li>
        </ul>
      </section>

      <section class="doc-card" style="margin-top:16px;">
        <h2>04. 新しいページを作るときのミニガイド</h2>
        <p>
          例えば <span class="doc-mono">notes-xxx.html</span> のような新しいページを作りたくなったときは、
          次の流れで進める：
        </p>
        <ol class="doc-checklist">
          <li>ファイル名を決める（例：<span class="doc-mono">notes-web-architecture.html</span>）。</li>
          <li><span class="doc-mono">index.html</span> を参考に、
            ヘッダー・<span class="doc-mono">main.site-main</span>・<span class="doc-mono">.wrap</span>・フッターの骨組みをコピーする。
          </li>
          <li>ページ固有スタイルは、まずは <span class="doc-mono">&lt;style&gt;</span> に軽く書いてみて、
            再利用したくなったら <span class="doc-mono">/assets/base.css</span> 側に昇格させる。
          </li>
          <li>JS が必要になったら、<span class="doc-mono">/demos/**</span> と同じパターンで
            「設定 → 状態 → DOM → ユーティリティ → 描画 → イベント → 初期化」の順番で組む。
          </li>
        </ol>
        <p class="doc-tagline">
          → 「いきなり完璧な設計図」を目指さず、「読める・壊れない・増やせる」を最低ラインとして揃えておくイメージ。
        </p>
      </section>
    </div>
  </main>

  <div data-include="/partials/footer.html"></div>
</body>
</html>
