:root{
  --bg:#0f0f10; --panel:#171718; --grid:#2a2a2c; --text:#eaeaea; --muted:#a8a8ad;
  --accent:#6da9ff; --event-a:#6da9ff; --event-b:#ff7aa2; --event-c:#7ad1a8; --event-d:#f6c85f;

  --hour-height: 72px;     /* 1時間の縦高さ（56～92でお好み調整） */
  --gutter-w: 80px;        /* 左の時間ラベル領域 */
  --now-line: #60a5fa;     /* 現在時刻ラインの色 */
}

*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font:14px/1.4 system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial}

header.appbar{
  display:flex;align-items:center;gap:.75rem;padding:.8rem 1rem;border-bottom:1px solid var(--grid);
  background:var(--panel);position:sticky;top:0;z-index:50;
}
header.appbar h1{font-size:16px;margin:0 0 0 .25rem}
.toolbar{margin-left:auto;display:flex;gap:.5rem;align-items:center}
.toolbar button{
  background:#111; color:var(--text); border:1px solid var(--grid); border-radius:8px; padding:.45rem .6rem; cursor:pointer;
}

.wrap{padding:1rem;max-width:1200px;margin:0 auto}

/* 上部の曜日バー */
.weekbar{
  display:grid;grid-template-columns:var(--gutter-w) repeat(7,1fr);gap:0;align-items:end;padding:.3rem 0 .5rem
}
.weekbar .dow{padding:.25rem .5rem;color:var(--muted)}
.weekbar .dow .date{display:block;font-size:20px;color:var(--text)}

/* カレンダー（24時間固定の行） */
.calendar{
  display:grid;grid-template-columns:var(--gutter-w) repeat(7,1fr);position:relative;border-top:1px solid var(--grid);border-bottom:1px solid var(--grid);
  min-height:600px;background:var(--panel);
}

/* 時間ガター（0:00〜23:00を24行で） */
.times{display:grid;grid-template-rows:repeat(24,var(--hour-height));border-right:1px solid var(--grid)}
.timecell{padding:.25rem .5rem;color:var(--muted);font-size:12px;border-top:1px solid var(--grid)}
.timecell:first-child{border-top:none}

/* 各日カラム */
.day{position:relative;display:grid;grid-template-rows:repeat(24,var(--hour-height));border-right:1px solid var(--grid)}
.day:last-child{border-right:none}
.slot{border-top:1px solid var(--grid);position:relative}
.slot:nth-child(odd){background:rgba(255,255,255,0.01)}

/* 予定カード */
.event{
  position:absolute;left:6px;right:6px;border-radius:10px;padding:.25rem .4rem .3rem;overflow:hidden;
  color:#0b0b0c;font-weight:600;box-shadow:0 2px 6px rgba(0,0,0,.35);
}
.event small{display:block;font-weight:500;opacity:.85}

/* 現在時刻ライン（ガターを避けて全幅横断） */
.now-line{
  position:absolute;left:var(--gutter-w);right:0;height:2px;background:var(--now-line);
  box-shadow:0 0 0 2px color-mix(in srgb, var(--now-line), transparent 75%);
  pointer-events:none;z-index:5;top:0;display:none;
}

/* 過去予定は減光＋若干減彩 */
.event.past{ opacity:.35; filter:saturate(.75); }

.legend{display:flex;gap:.5rem;flex-wrap:wrap;align-items:center}
.legend .item{display:flex;align-items:center;gap:.35rem;color:var(--muted)}
.legend .sw{width:12px;height:12px;border-radius:3px;display:inline-block}

/* dialog */
dialog{ border:1px solid var(--grid); background:#111; color:var(--text); border-radius:12px; padding:1rem; width:min(400px, 90vw); }
dialog form{display:grid;gap:.6rem}
dialog input,dialog select{background:#0c0c0d;border:1px solid var(--grid);border-radius:8px;color:var(--text);padding:.5rem}
dialog .row{display:grid;grid-template-columns:1fr 1fr;gap:.5rem}
dialog .actions{display:flex;justify-content:flex-end;gap:.5rem;margin-top:.25rem}
dialog button{background:#1a1a1c;color:var(--text);border:1px solid var(--grid);border-radius:8px;padding:.45rem .7rem;cursor:pointer}

/* 小さい画面 */
@media (max-width:960px){
  :root{ --gutter-w: 56px; }
  .weekbar .dow .date{font-size:18px}
}
