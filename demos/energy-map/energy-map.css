/* ===== Energy Map 専用スタイル ===== */

.em-wrap{
  max-width:1200px;
  margin:0 auto;
  padding:32px 20px 48px;
}

.em-header{
  margin-bottom:20px;
}

.page-lead{
  margin:0 0 16px;
  font-size:14px;
  opacity:.9;
}

/* 日付・時間コントロール */

.em-time-controls{
  display:flex;
  flex-wrap:wrap;
  gap:16px;
  padding:14px 18px;
  border-radius:14px;
  background:var(--card);
  box-shadow:var(--shadow);
  margin-bottom:20px;
}

.em-time-controls .field{
  display:flex;
  flex-direction:column;
  gap:4px;
  font-size:13px;
}

.em-time-controls label{
  opacity:.8;
}

.field-time{
  min-width:260px;
}

.time-row{
  display:flex;
  align-items:center;
  gap:12px;
}

#em-time-slider{
  flex:1;
}

.time-label{
  width:52px;
  font-variant-numeric:tabular-nums;
  text-align:right;
}

.btn-ghost{
  padding:.3rem .7rem;
  border-radius:.7rem;
  border:1px solid rgba(0,0,0,.08);
  background:transparent;
  font-size:13px;
  cursor:pointer;
}
.btn-ghost:hover{
  background:rgba(0,0,0,.04);
}

/* メイン 2カラム + 地図カード */

.em-layout{
  display:grid;
  grid-template-columns:minmax(0,1.3fr) minmax(0,1.1fr);
  gap:20px;
}

@media (max-width:960px){
  .em-layout{
    grid-template-columns:1fr;
  }
}

.em-card{
  background:var(--card);
  border-radius:16px;
  box-shadow:var(--shadow);
  padding:18px 20px 16px;
}

/* 左カードをさらに上下に分割（Area + Market） */

.em-area{
  grid-row:1 / span 2;
  display:flex;
  flex-direction:column;
}

.em-snapshot{
  grid-row:1;
}

.em-market{
  grid-row:2;
}

/* Card header */

.em-card-header{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap:8px;
  margin-bottom:10px;
}

.em-card-header h2{
  font-size:1.05rem;
  margin:0;
}

.em-meta{
  font-size:.8rem;
  opacity:.7;
}

/* ===== SVG 日本地図 ===== */

.em-map-wrap{
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:8px 0 4px;
}

/* 外部 SVG を埋め込む <object> / inline SVG 両対応 */
.jp-energy-map{
  width:100%;
  max-width:360px;
  height:auto;
  display:block;
}

/* エリアカラー（参考画像に近いトーン） */
:root{
  --area-hokkaido:#2f86d9;
  --area-tohoku:#5675c7;
  --area-tokyo:#3fb3d4;
  --area-hokuriku:#a6c930;
  --area-chubu:#33a365;
  --area-kansai:#f3b222;
  --area-chugoku:#f28a22;
  --area-shikoku:#f25b3f;
  --area-kyushu:#e1354f;
}

/* SVG 内の各エリアパス/グループ用 */
.jp-area{
  stroke:rgba(0,0,0,.08);
  stroke-width:2;
  fill:#e5e7eb;
  cursor:pointer;
  transition:fill .15s ease, transform .12s ease, box-shadow .12s ease;
}

/* デフォルト色をエリア別に上書き */
.jp-area[data-area="hokkaido"]{ fill:var(--area-hokkaido); }
.jp-area[data-area="tohoku"]{ fill:var(--area-tohoku); }
.jp-area[data-area="tokyo"]{ fill:var(--area-tokyo); }
.jp-area[data-area="hokuriku"]{ fill:var(--area-hokuriku); }
.jp-area[data-area="chubu"]{ fill:var(--area-chubu); }
.jp-area[data-area="kansai"]{ fill:var(--area-kansai); }
.jp-area[data-area="chugoku"]{ fill:var(--area-chugoku); }
.jp-area[data-area="shikoku"]{ fill:var(--area-shikoku); }
.jp-area[data-area="kyusyu"]{ fill:var(--area-kyushu); }

.jp-area:hover{
  filter:brightness(1.05);
  transform:translateY(-2px);
}

.jp-area.is-active{
  stroke:#111827;
  stroke-width:2.5;
  filter:brightness(1.12);
}

.em-note{
  margin-top:6px;
  font-size:.75rem;
  opacity:.65;
}

/* Snapshot */

.snapshot-grid{
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:8px 16px;
  margin:4px 0 0;
}

.snapshot-grid dt{
  font-size:.8rem;
  opacity:.7;
}

.snapshot-grid dd{
  margin:2px 0 0;
  font-size:.95rem;
}

/* Market */

.market-controls{
  display:flex;
  flex-wrap:wrap;
  gap:12px 16px;
  margin-bottom:10px;
}

.market-controls .field{
  display:flex;
  flex-direction:column;
  gap:4px;
  font-size:.8rem;
}

.market-controls label{
  opacity:.75;
}

.market-controls select{
  padding:6px 9px;
  border-radius:8px;
  border:1px solid #e5e7eb;
  background:var(--card);
  font-size:.86rem;
}

.view-toggle{
  margin-left:auto;
  min-width:160px;
}

.view-toggle .label{
  font-size:.8rem;
  opacity:.7;
  margin-bottom:4px;
}

.segmented{
  display:inline-flex;
  border-radius:999px;
  border:1px solid #e5e7eb;
  overflow:hidden;
}

.seg-btn{
  border:none;
  background:transparent;
  padding:5px 12px;
  font-size:.8rem;
  cursor:pointer;
}

.seg-btn.is-active{
  background:#111827;
  color:#fff;
}

.market-view{
  border-radius:12px;
  border:1px dashed #d1d5db;
  padding:12px 14px;
  background:rgba(249,250,251,.85);
  font-size:.85rem;
}

.market-placeholder h3{
  margin:0 0 4px;
  font-size:.9rem;
}

.market-placeholder p{
  margin:0;
  line-height:1.6;
}

/* ダークモード微調整 */
@media (prefers-color-scheme: dark){
  .market-view{
    background:rgba(15,23,42,.6);
    border-color:#374151;
  }
  .market-placeholder p{
    color:#e5e7eb;
  }
  .jp-area{
    stroke:rgba(15,23,42,.9);
  }
}
