<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>Energy Map | Mochitecture</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- 共通スタイル -->
  <link rel="stylesheet" href="/assets/base.css">

  <!-- Energy Map 専用スタイル -->
  <link rel="stylesheet" href="/demos/energy-map/energy-map.css">

  <!-- 共通インクルード -->
  <script src="/assets/include.js" defer></script>

  <!-- Energy Map ロジック -->
  <script src="/demos/energy-map/energy-map.js" defer></script>
</head>
<body>
  <!-- header / footer は include.js で差し込み -->
  <div data-include="/partials/header.html"></div>

  <main class="site-main energy-main">
    <div class="energy-wrap">
      <!-- タイトル＆日付・時間 -->
      <header class="energy-header">
        <h1 class="page-title">Energy Map</h1>
        <p class="page-subtitle">
          日本の電力エリアを「市場 × 需給 × 天気」で眺めるためのミニマップ。
          いまは UI の骨組みだけ実装している状態。
        </p>

        <div class="energy-controls">
          <div class="field-group">
            <label for="dateInput">日付</label>
            <input type="date" id="dateInput">
          </div>
          <div class="field-group">
            <label for="timeRange">時間</label>
            <div class="time-row">
              <input type="range" id="timeRange" min="0" max="47" step="1">
              <span class="time-label" id="timeLabel">00:00</span>
              <button type="button" class="btn btn-ghost" id="timeNowBtn">Now</button>
            </div>
          </div>
        </div>
      </header>

      <!-- メイン 3 カラム -->
      <section class="energy-grid">
        <!-- Area -->
        <section class="card-panel area-card">
          <header class="panel-header">
            <div>
              <h2>Area</h2>
              <p class="panel-meta">
                選択中：
                <span id="selectedAreaLabel">未選択</span>
              </p>
            </div>
          </header>

          <div class="japan-map-wrap">
            <!-- シンプルな 9 エリア日本地図（イラスト的） -->
            <svg
              id="japanMap"
              class="japan-map-svg"
              viewBox="0 0 320 520"
              role="img"
              aria-label="Japan power system areas"
            >
              <!-- 北海道 -->
              <g class="area-block" data-area="hokkaido" data-label="北海道 / Hokkaido">
                <path
                  class="area-shape area-hokkaido"
                  d="M40 20 L140 20 L160 80 L120 120 L80 110 L40 70 Z"
                />
                <!-- 県境っぽい線 -->
                <path d="M80 25 L120 75 L110 105" class="area-border" />
              </g>

              <!-- 東北 -->
              <g class="area-block" data-area="tohoku" data-label="東北 / Tohoku">
                <path
                  class="area-shape area-tohoku"
                  d="M120 130 L190 130 L210 250 L150 260 L110 230 L100 170 Z"
                />
                <path d="M140 135 L155 220" class="area-border" />
                <path d="M170 135 L185 230" class="area-border" />
              </g>

              <!-- 東京 -->
              <g class="area-block" data-area="tokyo" data-label="東京 / Tokyo">
                <path
                  class="area-shape area-tokyo"
                  d="M145 265 L215 260 L225 315 L185 340 L145 325 Z"
                />
                <path d="M170 265 L185 330" class="area-border" />
              </g>

              <!-- 北陸 -->
              <g class="area-block" data-area="hokuriku" data-label="北陸 / Hokuriku">
                <path
                  class="area-shape area-hokuriku"
                  d="M90 245 L140 245 L150 320 L110 330 L80 305 Z"
                />
                <path d="M115 247 L125 320" class="area-border" />
              </g>

              <!-- 中部 -->
              <g class="area-block" data-area="chubu" data-label="中部 / Chubu">
                <path
                  class="area-shape area-chubu"
                  d="M80 315 L170 345 L180 415 L120 430 L70 395 Z"
                />
                <path d="M105 322 L135 420" class="area-border" />
                <path d="M140 332 L160 420" class="area-border" />
              </g>

              <!-- 関西 -->
              <g class="area-block" data-area="kansai" data-label="関西 / Kansai">
                <path
                  class="area-shape area-kansai"
                  d="M50 330 L95 350 L105 410 L60 420 L30 395 Z"
                />
                <path d="M72 335 L83 410" class="area-border" />
              </g>

              <!-- 中国 -->
              <g class="area-block" data-area="chugoku" data-label="中国 / Chugoku">
                <path
                  class="area-shape area-chugoku"
                  d="M15 355 L70 380 L75 440 L25 455 L5 420 Z"
                />
                <path d="M35 362 L50 445" class="area-border" />
              </g>

              <!-- 四国 -->
              <g class="area-block" data-area="shikoku" data-label="四国 / Shikoku">
                <path
                  class="area-shape area-shikoku"
                  d="M40 445 L110 460 L105 495 L45 500 Z"
                />
                <path d="M70 448 L75 494" class="area-border" />
              </g>

              <!-- 九州 -->
              <g class="area-block" data-area="kyushu" data-label="九州 / Kyushu">
                <path
                  class="area-shape area-kyushu"
                  d="M5 465 L55 480 L60 535 L25 540 L0 515 Z"
                />
                <path d="M30 470 L40 535" class="area-border" />
              </g>
            </svg>
          </div>

          <p class="panel-note">
            ※ イラスト的な日本地図上でエリアを選択。後のフェーズで、各エリアの実データと連携させていきます。
          </p>
        </section>

        <!-- Snapshot -->
        <section class="card-panel snapshot-card">
          <header class="panel-header">
            <div>
              <h2>Now Snapshot</h2>
              <p class="panel-meta" id="snapshotMeta">-- エリア / -- --:--（ダミー値）</p>
            </div>
          </header>

          <dl class="snapshot-grid">
            <div class="snapshot-item">
              <dt>予備率</dt>
              <dd id="snapshotReserve">-- %</dd>
            </div>
            <div class="snapshot-item">
              <dt>需要</dt>
              <dd id="snapshotDemand">-- MW</dd>
            </div>
            <div class="snapshot-item">
              <dt>天気</dt>
              <dd id="snapshotWeather">--</dd>
            </div>
            <div class="snapshot-item">
              <dt>気温</dt>
              <dd id="snapshotTemp">-- ℃</dd>
            </div>
          </dl>
        </section>

        <!-- Market Panel -->
        <section class="card-panel market-card">
          <header class="panel-header">
            <div>
              <h2>Market Panel</h2>
              <p class="panel-meta" id="marketMeta">
                卸電力市場 / 需給調整市場のビュー（UI のみ実装中）
              </p>
            </div>
          </header>

          <form class="market-form" onsubmit="return false">
            <div class="market-row">
              <label for="marketSelect">市場</label>
              <select id="marketSelect">
                <option value="eprx">需給調整市場（EPRX）</option>
                <option value="jepx">卸電力市場（JEPX）</option>
              </select>
            </div>

            <div class="market-row">
              <label for="menuSelect">メニュー</label>
              <select id="menuSelect">
                <!-- JS で埋める -->
              </select>
            </div>

            <div class="market-row market-view-toggle">
              <span class="market-view-label">ビュー</span>
              <div class="btn-toggle-wrap">
                <button
                  type="button"
                  class="btn btn-switch is-active"
                  data-view="graph"
                >
                  Graph
                </button>
                <button
                  type="button"
                  class="btn btn-switch"
                  data-view="table"
                  data-kind="table"
                >
                  Table
                </button>
              </div>
            </div>
          </form>

          <div class="market-body">
            <p class="market-placeholder" id="marketPlaceholder">
              Frame only / EPRX<br>
              需給調整市場（EPRX）のメニューごとに、後のフェーズで実データを差し込むための枠だけを先に用意しています。
              グラフ／テーブルの見せ方の検討を優先するステップ。
            </p>
          </div>
        </section>
      </section>
    </div>
  </main>

  <div data-include="/partials/footer.html"></div>
</body>
</html>
