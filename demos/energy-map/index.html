<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>Energy Map | Mochitecture</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/assets/base.css">
  <link rel="stylesheet" href="/demos/energy-map/energy-map.css">
  <script defer src="/assets/include.js"></script>
</head>
<body>
  <div data-include="/partials/header.html"></div>

  <main class="site-main">
    <div class="page-energy-map">
      <!-- 上部：タイトル＋説明＋日付/時刻 -->
      <header class="emap-head">
        <div class="emap-head-text">
          <h1 class="page-title">Energy Map</h1>
          <p class="page-desc">
            日本の電力エリアを「市場 × 需給 × 天気」で眺めるためのミニマップ。
            いまは UI の骨組みだけ実装している状態。
          </p>
        </div>

        <section class="energy-map-timebar" aria-label="時間・日付の選択">
          <div class="timebar-group">
            <label for="dateInput">日付</label>
            <input type="date" id="dateInput">
          </div>

          <div class="timebar-group">
            <label for="timeSlider">時間</label>
            <input type="range" id="timeSlider" min="0" max="47" step="1">
            <span class="timebar-time-display" id="timeLabel">00:00</span>
          </div>

          <div class="timebar-group">
            <button type="button" class="btn-now" id="btnNow">Now</button>
          </div>
        </section>
      </header>

      <!-- 本体：左マップ＋右パネル -->
      <section class="energy-map-layout" aria-label="Energy Map layout">
        <!-- Left: area map -->
        <section class="energy-map-map" aria-label="エリア選択マップ">
          <header class="energy-map-map-header">
            <p class="energy-map-map-title">Area</p>
            <p class="energy-map-map-selected">
              <span class="label">選択中</span>
              <span id="selectedAreaLabel">東京</span>
            </p>
          </header>

          <div class="energy-map-grid" id="areaGrid">
            <button class="energy-map-region" data-area="Hokkaido">
              北海道<span>Hokkaido</span>
            </button>
            <button class="energy-map-region" data-area="Tohoku">
              東北<span>Tohoku</span>
            </button>
            <button class="energy-map-region is-active" data-area="Tokyo">
              東京<span>Tokyo</span>
            </button>
            <button class="energy-map-region" data-area="Chubu">
              中部<span>Chubu</span>
            </button>
            <button class="energy-map-region" data-area="Hokuriku">
              北陸<span>Hokuriku</span>
            </button>
            <button class="energy-map-region" data-area="Kansai">
              関西<span>Kansai</span>
            </button>
            <button class="energy-map-region" data-area="Chugoku">
              中国<span>Chugoku</span>
            </button>
            <button class="energy-map-region" data-area="Shikoku">
              四国<span>Shikoku</span>
            </button>
            <button class="energy-map-region" data-area="Kyushu">
              九州<span>Kyushu</span>
            </button>
          </div>

          <p class="energy-map-note">
            ※ いまは概念的なエリアブロックだけを配置。
            後のフェーズで日本地図や広域エリアの形状に差し替える前提のスケッチ。
          </p>
        </section>

        <!-- Right: snapshot card -->
        <section class="energy-map-panel-card" aria-label="エリア概況">
          <h2>Now Snapshot</h2>
          <p class="energy-map-panel-meta" id="snapshotMeta">
            東京 / 日付・時間未選択（ダミー表示）
          </p>
          <div class="snapshot-grid">
            <div class="snapshot-item">
              <span class="snapshot-label">予備率</span>
              <span class="snapshot-value is-empty" id="snapshotReserve">-- %</span>
            </div>
            <div class="snapshot-item">
              <span class="snapshot-label">需要</span>
              <span class="snapshot-value is-empty" id="snapshotDemand">-- MW</span>
            </div>
            <div class="snapshot-item">
              <span class="snapshot-label">天気</span>
              <span class="snapshot-value is-empty" id="snapshotWeather">--</span>
            </div>
            <div class="snapshot-item">
              <span class="snapshot-label">気温</span>
              <span class="snapshot-value is-empty" id="snapshotTemp">-- ℃</span>
            </div>
          </div>
        </section>

        <!-- Right: market detail card -->
        <section class="energy-map-panel-card" aria-label="市場パネル">
          <h2>Market Panel</h2>
          <p class="energy-map-panel-meta" id="marketMeta">
            市場とメニューを選ぶと、この枠にグラフ／テーブルを置く想定。
          </p>

          <div class="market-controls">
            <label>
              市場
              <select id="marketSelect">
                <option value="none">選択なし</option>
                <option value="eprx">需給調整市場（EPRX）</option>
                <option value="jepx">卸電力市場（JEPX）</option>
              </select>
            </label>

            <label>
              メニュー
              <select id="menuSelect" disabled>
                <option value="none">市場を先に選択</option>
              </select>
            </label>

            <div class="market-view-toggle" aria-label="表示モード">
              <button type="button" class="is-active" data-view="graph">Graph</button>
              <button type="button" data-view="table">Table</button>
            </div>
          </div>

          <div class="market-placeholder" id="marketPlaceholder">
            <strong>まだデータはつながっていません。</strong>
            <p>
              ここには、選んだ市場・メニューの時系列グラフやテーブルを配置します。
              まずは EPRX／OCCTO／気象庁のオープンデータから順番に接続する計画。
            </p>
          </div>
        </section>
      </section>
    </div>
  </main>

  <div data-include="/partials/footer.html"></div>

  <script src="/demos/energy-map/energy-map.js"></script>
</body>
</html>
