<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>Energy Map | Mochitecture</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- 共通スタイル -->
  <link rel="stylesheet" href="/assets/base.css">

  <!-- Energy Map 専用スタイル -->
  <link rel="stylesheet" href="/demos/energy-map/energy-map.css">

  <!-- 共通インクルード -->
  <script src="/assets/include.js" defer></script>

  <!-- Energy Map ロジック -->
  <script src="/demos/energy-map/energy-map.js" defer></script>
</head>
<body>
  <!-- header / footer は include.js で差し込み -->
  <div data-include="/partials/header.html"></div>

  <main class="site-main energy-main">
    <div class="energy-wrap">
      <!-- タイトル＆日付・時間 -->
      <header class="energy-header">
        <h1 class="page-title">Energy Map</h1>
        <p class="page-subtitle">
          日本の電力エリアを「市場 × 需給 × 天気」で眺めるためのミニマップ。
          いまは UI の骨組みだけ実装している状態。
        </p>

        <div class="energy-controls">
          <div class="field-group">
            <label for="dateInput">日付</label>
            <input type="date" id="dateInput">
          </div>
          <div class="field-group">
            <label for="timeRange">時間</label>
            <div class="time-row">
              <input type="range" id="timeRange" min="0" max="47" step="1">
              <span class="time-label" id="timeLabel">00:00</span>
              <button type="button" class="btn btn-ghost" id="timeNowBtn">Now</button>
            </div>
          </div>
        </div>
      </header>

      <!-- メイン 3 カラム -->
      <section class="energy-grid">
        <!-- Area -->
        <section class="card-panel area-card">
          <header class="panel-header">
            <div>
              <h2>Area</h2>
              <p class="panel-meta">
                選択中：
                <span id="selectedAreaLabel">未選択</span>
              </p>
            </div>
          </header>
        
          <div class="japan-map-wrap">
            <!-- 背景のきれいな日本地図画像（九電〜北電エリア色分け済み） -->
            <img
              src="/demos/energy-map/japan-areas.png"
              alt="日本の電力エリアマップ"
              class="japan-map-img"
            >
        
            <!-- 透明クリック領域（ざっくり位置。ブラウザで微調整してOK） -->
            <button class="area-hit area-hokkaido"
              data-area="hokkaido"
              data-label="北海道 / Hokkaido"
              type="button"></button>
        
            <button class="area-hit area-tohoku"
              data-area="tohoku"
              data-label="東北 / Tohoku"
              type="button"></button>
        
            <button class="area-hit area-tokyo"
              data-area="tokyo"
              data-label="東京 / Tokyo"
              type="button"></button>
        
            <button class="area-hit area-hokuriku"
              data-area="hokuriku"
              data-label="北陸 / Hokuriku"
              type="button"></button>
        
            <button class="area-hit area-chubu"
              data-area="chubu"
              data-label="中部 / Chubu"
              type="button"></button>
        
            <button class="area-hit area-kansai"
              data-area="kansai"
              data-label="関西 / Kansai"
              type="button"></button>
        
            <button class="area-hit area-chugoku"
              data-area="chugoku"
              data-label="中国 / Chugoku"
              type="button"></button>
        
            <button class="area-hit area-shikoku"
              data-area="shikoku"
              data-label="四国 / Shikoku"
              type="button"></button>
        
            <button class="area-hit area-kyushu"
              data-area="kyushu"
              data-label="九州 / Kyushu"
              type="button"></button>
          </div>
        
          <p class="panel-note">
            ※ 背景の日本地図上でエリアをクリック。後のフェーズで、各エリアの実データと連携させていきます。
          </p>
        </section>

        <!-- Snapshot -->
        <section class="card-panel snapshot-card">
          <header class="panel-header">
            <div>
              <h2>Now Snapshot</h2>
              <p class="panel-meta" id="snapshotMeta">-- エリア / -- --:--（ダミー値）</p>
            </div>
          </header>

          <dl class="snapshot-grid">
            <div class="snapshot-item">
              <dt>予備率</dt>
              <dd id="snapshotReserve">-- %</dd>
            </div>
            <div class="snapshot-item">
              <dt>需要</dt>
              <dd id="snapshotDemand">-- MW</dd>
            </div>
            <div class="snapshot-item">
              <dt>天気</dt>
              <dd id="snapshotWeather">--</dd>
            </div>
            <div class="snapshot-item">
              <dt>気温</dt>
              <dd id="snapshotTemp">-- ℃</dd>
            </div>
          </dl>
        </section>

        <!-- Market Panel -->
        <section class="card-panel market-card">
          <header class="panel-header">
            <div>
              <h2>Market Panel</h2>
              <p class="panel-meta" id="marketMeta">
                卸電力市場 / 需給調整市場のビュー（UI のみ実装中）
              </p>
            </div>
          </header>

          <form class="market-form" onsubmit="return false">
            <div class="market-row">
              <label for="marketSelect">市場</label>
              <select id="marketSelect">
                <option value="eprx">需給調整市場（EPRX）</option>
                <option value="jepx">卸電力市場（JEPX）</option>
              </select>
            </div>

            <div class="market-row">
              <label for="menuSelect">メニュー</label>
              <select id="menuSelect">
                <!-- JS で埋める -->
              </select>
            </div>

            <div class="market-row market-view-toggle">
              <span class="market-view-label">ビュー</span>
              <div class="btn-toggle-wrap">
                <button
                  type="button"
                  class="btn btn-switch is-active"
                  data-view="graph"
                >
                  Graph
                </button>
                <button
                  type="button"
                  class="btn btn-switch"
                  data-view="table"
                  data-kind="table"
                >
                  Table
                </button>
              </div>
            </div>
          </form>

          <div class="market-body">
            <p class="market-placeholder" id="marketPlaceholder">
              Frame only / EPRX<br>
              需給調整市場（EPRX）のメニューごとに、後のフェーズで実データを差し込むための枠だけを先に用意しています。
              グラフ／テーブルの見せ方の検討を優先するステップ。
            </p>
          </div>
        </section>
      </section>
    </div>
  </main>

  <div data-include="/partials/footer.html"></div>
</body>
</html>
