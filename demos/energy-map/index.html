<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>Energy Map | Mochitecture</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/assets/base.css">
  <link rel="stylesheet" href="/demos/energy-map/energy-map.css">
  <script defer src="/assets/include.js"></script>
</head>
<body>
  <div data-include="/partials/header.html"></div>

  <main class="site-main">
    <div class="wrap page-energy-map">
      <header class="page-head">
        <h1 class="page-title">Energy Map</h1>
        <p class="page-desc">
          日本の電力エリアごとの「市場シグナル × 需給 × 天気」を一枚で眺めるための実験ページ。
          現時点では UI の枠組みのみ実装し、データ連携は今後段階的に追加予定。
        </p>
      </header>

      <section class="energy-map-layout" aria-label="Energy Map layout">
        <!-- Left: area map -->
        <section class="energy-map-map" aria-label="エリア選択マップ">
          <header class="energy-map-map-header">
            <p class="energy-map-map-title">エリアマップ</p>
            <p class="energy-map-map-selected">
              選択中：<span id="selectedAreaLabel">東京エリア</span>
            </p>
          </header>

          <div class="energy-map-grid" id="areaGrid">
            <button class="energy-map-region" data-area="Hokkaido">
              北海道<span>Hokkaido</span>
            </button>
            <button class="energy-map-region" data-area="Tohoku">
              東北<span>Tohoku</span>
            </button>
            <button class="energy-map-region is-active" data-area="Tokyo">
              東京<span>Tokyo</span>
            </button>
            <button class="energy-map-region" data-area="Chubu">
              中部<span>Chubu</span>
            </button>
            <button class="energy-map-region" data-area="Hokuriku">
              北陸<span>Hokuriku</span>
            </button>
            <button class="energy-map-region" data-area="Kansai">
              関西<span>Kansai</span>
            </button>
            <button class="energy-map-region" data-area="Chugoku">
              中国<span>Chugoku</span>
            </button>
            <button class="energy-map-region" data-area="Shikoku">
              四国<span>Shikoku</span>
            </button>
            <button class="energy-map-region" data-area="Kyushu">
              九州<span>Kyushu</span>
            </button>
          </div>

          <p class="energy-map-note">
            ※ 現時点では概念的なエリアブロックのみ表示しています。
            後続フェーズで、日本地図や広域系統エリア形状に差し替える前提のスケッチです。
          </p>
        </section>

        <!-- Right: snapshot card -->
        <section class="energy-map-panel-card" aria-label="現在の代表データ">
          <h2>現在の代表データ</h2>
          <p class="energy-map-panel-meta" id="snapshotMeta">
            東京エリア・選択時刻の代表値（ダミー表示中）
          </p>
          <div class="snapshot-grid">
            <div class="snapshot-item">
              <span class="snapshot-label">広域予備率</span>
              <span class="snapshot-value is-empty" id="snapshotReserve">-- %</span>
            </div>
            <div class="snapshot-item">
              <span class="snapshot-label">需要実績</span>
              <span class="snapshot-value is-empty" id="snapshotDemand">-- MW</span>
            </div>
            <div class="snapshot-item">
              <span class="snapshot-label">天気</span>
              <span class="snapshot-value is-empty" id="snapshotWeather">--</span>
            </div>
            <div class="snapshot-item">
              <span class="snapshot-label">気温</span>
              <span class="snapshot-value is-empty" id="snapshotTemp">-- ℃</span>
            </div>
          </div>
        </section>

        <!-- Right: market detail card -->
        <section class="energy-map-panel-card" aria-label="市場・メニュー詳細">
          <h2>市場・メニュー詳細</h2>
          <p class="energy-map-panel-meta" id="marketMeta">
            表示する市場とメニューを選ぶと、この枠にグラフ／テーブルを配置予定。
          </p>

          <div class="market-controls">
            <label>
              市場
              <select id="marketSelect">
                <option value="none">（市場を選択）</option>
                <option value="eprx">需給調整市場（EPRX）</option>
                <option value="jepx-spot" disabled>JEPXスポット（契約前のため表示のみ）</option>
                <option value="jepx-intraday" disabled>JEPX時間前（契約前のため表示のみ）</option>
              </select>
            </label>

            <label>
              メニュー
              <select id="menuSelect" disabled>
                <option value="none">（市場を先に選択）</option>
              </select>
            </label>

            <div class="market-view-toggle" aria-label="表示モード選択">
              <button type="button" class="is-active" data-view="graph">Graph</button>
              <button type="button" data-view="table">Table</button>
            </div>
          </div>

          <div class="market-placeholder" id="marketPlaceholder">
            <strong>まだデータは接続していません。</strong>
            <p>
              ここには、選択した市場・メニューの時系列グラフやテーブルを表示します。
              現段階では UI の骨組みのみを実装しておき、
              後続フェーズで EPRX や OCCTO のオープンデータを安全な範囲で接続します。
            </p>
          </div>
        </section>
      </section>

      <!-- time controls -->
      <section class="energy-map-timebar" aria-label="時間・日付の選択">
        <div class="timebar-group">
          <label for="dateInput">日付</label>
          <input type="date" id="dateInput">
        </div>

        <div class="timebar-group">
          <label for="timeSlider">時刻</label>
          <input type="range" id="timeSlider" min="0" max="47" step="1">
          <span class="timebar-time-display" id="timeLabel">00:00</span>
        </div>

        <div class="timebar-group">
          <button type="button" class="btn-now" id="btnNow">現在時刻へ</button>
        </div>
      </section>
    </div>
  </main>

  <div data-include="/partials/footer.html"></div>

  <script src="/demos/energy-map/energy-map.js"></script>
</body>
</html>
