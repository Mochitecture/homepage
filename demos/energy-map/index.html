<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>Energy Map | Mochitecture</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="icon" href="/mochitecture_icon.png">
  <link rel="stylesheet" href="/assets/base.css">
  <link rel="stylesheet" href="/demos/energy-map/energy-map.css">
  <script defer src="/assets/include.js"></script>
  <script defer src="/demos/energy-map/energy-map.js"></script>
</head>
<body>
  <div data-include="/partials/header.html"></div>

  <main class="site-main">
    <div class="em-wrap">
      <header class="em-header">
        <h1 class="page-title">Energy Map</h1>
        <p class="page-lead">
          日本の電力エリアを「市場 × 需給 × 天気」で眺めるためのミニマップ。いまは UI の骨組みだけ実装している状態。
        </p>

        <div class="em-time-controls">
          <div class="field">
            <label for="em-date">日付</label>
            <input type="date" id="em-date">
          </div>
          <div class="field field-time">
            <label for="em-time-slider">時間</label>
            <div class="time-row">
              <input type="range" id="em-time-slider" min="0" max="47" step="1">
              <span class="time-label" id="em-time-label">00:00</span>
              <button type="button" id="em-now-btn" class="btn btn-ghost">Now</button>
            </div>
          </div>
        </div>
      </header>

      <section class="em-layout">
        <!-- 左：エリア地図 -->
        <section class="em-card em-area">
          <header class="em-card-header">
            <h2>Area</h2>
            <p class="em-meta">
              選択中：<span id="em-area-label">北陸 / Hokuriku</span>
            </p>
          </header>

          <div class="em-map-wrap">
            <!-- ★ 外部SVGファイルを読み込む -->
            <object
              id="em-map-object"
              class="jp-energy-map"
              type="image/svg+xml"
              data="/demos/energy-map/JP-EnergyAreas.svg"
              role="img"
              aria-label="Japan power grid areas"
            ></object>
          </div>

          <p class="em-note">
            ※ いまはイラスト的な日本地図上でエリアを選択。後のフェーズで実データや指標と連携させていきます。
          </p>
        </section>


        <!-- 中央：Snapshot -->
        <section class="em-card em-snapshot">
          <header class="em-card-header">
            <h2>Now Snapshot</h2>
            <p class="em-meta" id="em-snapshot-meta">
              北陸 / Hokuriku / 2025-11-16 00:00（ダミー値）
            </p>
          </header>
          <dl class="snapshot-grid">
            <div>
              <dt>予備率</dt>
              <dd id="em-snapshot-reserve">-- %</dd>
            </div>
            <div>
              <dt>需要</dt>
              <dd id="em-snapshot-demand">-- MW</dd>
            </div>
            <div>
              <dt>天気</dt>
              <dd id="em-snapshot-weather">--</dd>
            </div>
            <div>
              <dt>気温</dt>
              <dd id="em-snapshot-temp">-- ℃</dd>
            </div>
          </dl>
        </section>

        <!-- 右：Market Panel -->
        <section class="em-card em-market">
          <header class="em-card-header">
            <h2>Market Panel</h2>
            <p class="em-meta" id="em-market-meta">
              北陸 / Hokuriku / 2025-11-16 00:00｜需給調整市場（EPRX） - 一次調整力
            </p>
          </header>

          <div class="market-controls">
            <div class="field">
              <label for="em-market-select">市場</label>
              <select id="em-market-select">
                <option value="eprx">需給調整市場（EPRX）</option>
                <option value="jepx">卸電力市場（JEPX）</option>
              </select>
            </div>
            <div class="field">
              <label for="em-menu-select">メニュー</label>
              <select id="em-menu-select">
                <!-- JS で動的に差し替え -->
              </select>
            </div>
            <div class="field view-toggle">
              <span class="label">ビュー</span>
              <div class="segmented">
                <button type="button" class="seg-btn is-active" data-view="graph">Graph</button>
                <button type="button" class="seg-btn" data-view="table">Table</button>
              </div>
            </div>
          </div>

          <div class="market-view" id="em-market-view">
            <div class="market-placeholder">
              <h3 id="em-market-view-title">Frame only / EPRX - 一次調整力</h3>
              <p id="em-market-view-body">
                需給調整市場（EPRX）の一次調整力に関する指標を、時系列グラフで眺めるためのビュー。今はまだダミーの枠のみを実装し、データの差し込み方や指標セットを検討する段階。
              </p>
            </div>
          </div>
        </section>
      </section>
    </div>
  </main>

  <div data-include="/partials/footer.html"></div>
</body>
</html>
