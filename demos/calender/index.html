<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Schedule – Calendar｜Mochitecture</title>

  <!-- Mochitecture 共通 -->
  <link rel="icon" type="image/png" href="/mochitecture_icon.png" />
  <link rel="stylesheet" href="/assets/base.css?v=20251110a" />

  <!-- カレンダー専用 -->
  <link rel="stylesheet" href="/demos/calender/styles.css?v=20251116" />

  <!--
    /demos/calender/index.html
    Pattern:
      - Demo Pattern（UI試作用ページ）
      - Layout: base.css の .wrap + .card をベースに、.calendar-page で微調整
      - JS: /demos/calender/app.js にロジックを集約
    Notes:
      - 週ビューのスケジュールグリッド
      - ローカルストレージ保存・ドラッグ編集・空き時間検索など UI 実験用
  -->
</head>
<body class="calendar-page">
  <!-- 共通ヘッダー -->
  <div data-include="/partials/header.html"></div>

  <main class="site-main wrap">
    <h1 class="page-title">Schedule – Week View</h1>

    <!-- 操作バー -->
    <div class="cal-toolbar">
      <div class="left">
        <button id="prevBtn" class="btn">←</button>
        <button id="todayBtn" class="btn">今日</button>
        <button id="nextBtn" class="btn">→</button>
      </div>
      <div class="right">
        <button id="snapBtn" class="btn">📸 Snapshot</button>
        <button id="clearBtn" class="btn">Clear</button>
        <button id="finderBtn" class="btn btn-primary">🔎 Availability</button>
      </div>
    </div>

    <!-- レジェンド -->
    <div id="legend" class="legend"></div>

    <!-- カレンダー本体 -->
    <div id="calendarWrap" class="calendar-wrap card">
      <div id="weekbar" class="weekbar"></div>
      <div id="calendar" class="calendar"></div>
      <p class="hint">ドラッグで新規／端をドラッグでリサイズ／ダブルクリックで編集</p>
    </div>
  </main>

  <!-- 共通フッター -->
  <div data-include="/partials/footer.html"></div>

  <!-- ダイアログ：予定（新規/編集） -->
  <dialog id="eventDialog" class="dialog">
    <form method="dialog" id="eventForm" class="form">
      <input type="hidden" name="id" />
      <label>タイトル
        <input name="title" placeholder="タイトル" />
      </label>
      <div class="grid2">
        <label>開始日<input type="date" name="startDate" required></label>
        <label>開始時刻
          <select name="startTime" required></select>
        </label>
      </div>
      <div class="grid2">
        <label>終了日<input type="date" name="endDate" required></label>
        <label>終了時刻
          <select name="endTime" required></select>
        </label>
      </div>
      <label>カレンダー
        <select name="calendar">
          <option value="Work">Work</option>
          <option value="Personal">Personal</option>
          <option value="Mochitecture" selected>Mochitecture</option>
          <option value="Research">Research</option>
        </select>
      </label>
      <div class="actions">
        <button id="deleteBtn" type="button" class="btn">削除</button>
        <button value="cancel" class="btn">キャンセル</button>
        <button id="saveBtn" value="default" class="btn btn-primary">保存</button>
      </div>
    </form>
  </dialog>

  <!-- ダイアログ：空き時間検索 -->
  <dialog id="finderDialog" class="dialog">
    <form class="form" method="dialog">
      <strong>空き時間検索（選択カレンダーの重なり無し）</strong>
      <div id="calPick" class="pick"></div>
      <div class="grid2">
        <label>必要時間
          <select id="needMin">
            <option value="30">30分</option>
            <option value="45">45分</option>
            <option value="60" selected>60分</option>
            <option value="90">90分</option>
            <option value="120">120分</option>
          </select>
        </label>
        <label>候補時間帯
          <select id="window">
            <option value="9-19" selected>09:00–19:00</option>
            <option value="8-22">08:00–22:00</option>
            <option value="0-24">00:00–24:00</option>
          </select>
        </label>
      </div>
      <div class="actions">
        <button value="cancel" class="btn">閉じる</button>
        <button id="runFinder" class="btn btn-primary">検索</button>
      </div>
      <div id="finderResults" class="results"></div>
    </form>
  </dialog>

  <!-- ライブラリ（スナップショット用） -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js" defer></script>

  <!-- 共通インクルード実行 -->
  <script src="/assets/include.js" defer></script>

  <!-- このカレンダーの振る舞い -->
  <script src="/demos/calender/app.js?v=20251116" defer></script>
</body>
</html>
