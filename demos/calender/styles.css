/* ===== Calendar styles (Mochitecture調) ===== */
:root{
  --panel: var(--card);
  --grid: rgba(0,0,0,.07);
  --muted:#6b7280;
  --accent:#2563eb;
  --event-a:#60a5fa; /* Work */
  --event-b:#f472b6; /* Personal */
  --event-c:#7ad1a8; /* Mochitecture */
  --event-d:#f6c85f; /* Research */
}

/* レイアウト */
.wrap{ max-width:1100px; margin:0 auto; padding:24px 20px }
.page-header{ display:flex; align-items:flex-end; gap:16px; justify-content:space-between; margin-bottom:12px; }
.legend{ display:flex; gap:.6rem; flex-wrap:wrap; }
.legend .item{ display:flex; align-items:center; gap:.35rem; color:var(--muted); font-size:.95rem }
.legend .sw{ width:12px; height:12px; border-radius:3px; display:inline-block }

.toolbar{ display:flex; align-items:center; justify-content:space-between; margin:8px 0 14px }
.hint{ color:var(--muted); font-size:.9rem }

.btn{
  display:inline-flex; align-items:center; gap:.4rem;
  padding:.45rem .8rem; border-radius:.6rem; border:1px solid rgba(0,0,0,.12);
  background:var(--panel); color:var(--fg); cursor:pointer;
}
.btn:hover{ transform:translateY(-1px); transition:transform .12s ease; }
.btn-primary{ background:#111827; color:#fff; border-color:#111827; }
@media (prefers-color-scheme: dark){
  .btn{ border-color:rgba(255,255,255,.16); }
  .btn-primary{ background:#2563eb; border-color:#2563eb; }
}

.calendar-card{ padding:0; overflow:hidden }

/* Week bar + grid */
.weekbar{
  display:grid; grid-template-columns:80px repeat(7, 1fr); gap:0;
  align-items:end; padding:.65rem .8rem; border-bottom:1px solid var(--grid); background:var(--panel);
}
.weekbar .dow{ padding:.25rem; color:var(--muted); }
.weekbar .date{ display:block; font-size:1.25rem; color:var(--fg) }

.calendar-wrap{ height: calc(100vh - 220px); min-height:540px; overflow:auto; background:var(--panel); }
.calendar{
  position:relative; display:grid; grid-template-columns:80px repeat(7,1fr);
  border-bottom:1px solid var(--grid);
}

/* time gutter */
.times{ display:grid; grid-auto-rows:36px; border-right:1px solid var(--grid); }
.timecell{ padding:.2rem .5rem; color:var(--muted); font-size:.85rem; border-top:1px solid var(--grid); }
.timecell:first-child{ border-top:none }

/* day columns */
.day{ position:relative; display:grid; grid-auto-rows:36px; border-right:1px solid var(--grid) }
.day:last-child{ border-right:none }
.slot{ border-top:1px solid var(--grid); position:relative }
.slot:nth-child(odd){ background:rgba(0,0,0,.01) }
@media (prefers-color-scheme: dark){
  .slot:nth-child(odd){ background:rgba(255,255,255,.02) }
}

/* events */
.event{
  position:absolute; left:6px; right:6px; border-radius:10px; padding:.25rem .4rem .3rem; overflow:hidden;
  color:#0b0b0c; font-weight:600; box-shadow:0 2px 6px rgba(0,0,0,.25); user-select:none;
}
.event small{ display:block; font-weight:500; opacity:.9 }
.event .handle{ position:absolute; left:4px; right:4px; height:6px; cursor:ns-resize; }
.event .h-top{ top:0 } .event .h-btm{ bottom:0 }

/* current line（今日の列だけ） */
.nowline{ position:absolute; left:0; right:0; height:2px; background:var(--accent);
  box-shadow:0 0 6px rgba(37,99,235,.85); pointer-events:none; z-index:20; }

/* dialogs */
.dialog{
  border:1px solid rgba(0,0,0,.12); background:var(--panel); color:var(--fg);
  border-radius:14px; padding:1rem; width:min(520px, 92vw);
}
.dialog form{ display:grid; gap:.65rem }
.dialog input, .dialog select{
  background:var(--panel); color:var(--fg); border:1px solid rgba(0,0,0,.14); border-radius:.6rem; padding:.5rem .6rem;
}
.dialog .row{ display:grid; grid-template-columns:1fr 1fr; gap:.5rem }
.dialog .actions{ display:flex; justify-content:flex-end; gap:.5rem; margin-top:.25rem }

/* finder */
.cal-pick{ display:flex; gap:10px; flex-wrap:wrap }
.results{ margin-top:.75rem; display:grid; gap:.5rem; max-height:45vh; overflow:auto }
.result-item{
  display:flex; align-items:center; justify-content:space-between; gap:8px;
  padding:.6rem .75rem; border:1px solid rgba(0,0,0,.08); border-radius:.75rem; background:var(--panel);
}
.result-item .meta{ color:var(--muted); font-size:.9rem }
