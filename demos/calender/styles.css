/* カレンダー固有。Mochitectureのトーンに合わせた薄いカード＋グリッド */
:root{
  --grid:#e5e7eb;        /* グリッド線の明るさ */
  --grid-dark:#2a2f3a;
  --panel:var(--card);   /* カード背景 */
  --muted:#6b7280;       /* 補助テキスト色 */

  --event-a:#60a5fa; /* Work */
  --event-b:#fb7185; /* Personal */
  --event-c:#34d399; /* Mochitecture */
  --event-d:#f59e0b; /* Research */
}
@media (prefers-color-scheme: dark){
  :root{
    --grid:#2a2f3a;
    --muted:#a8acb4;
  }
}

/* レイアウト */
.wrap{ max-width:1100px; margin:0 auto; padding:24px 20px; width:100%; }
.page-title{ margin-bottom:12px; }

.cal-toolbar{
  display:flex; justify-content:space-between; align-items:center;
  gap:12px; margin-bottom:10px;
}
.cal-toolbar .btn{ border:1px solid rgba(0,0,0,.08); }
@media (prefers-color-scheme: dark){
  .cal-toolbar .btn{ border-color: rgba(255,255,255,.12); }
}

/* カード */
.card{
  background:var(--panel);
  border-radius:14px;
  box-shadow:var(--shadow);
  padding:14px;
}

/* レジェンド */
.legend{ display:flex; gap:.6rem; flex-wrap:wrap; margin-bottom:10px; }
.legend .item{ display:inline-flex; align-items:center; gap:.35rem; color:var(--muted); }
.legend .sw{ width:12px; height:12px; border-radius:3px; display:inline-block }

/* カレンダー */
.calendar-wrap{ position:relative; }
.weekbar{
  display:grid; grid-template-columns:80px repeat(7,1fr); align-items:end;
  gap:0; padding:.2rem 0 .4rem; color:var(--muted);
}
.weekbar .dow .date{ display:block; font-size:18px; color:var(--fg); }

.calendar{
  display:grid; grid-template-columns:80px repeat(7,1fr);
  position:relative; border-top:1px solid var(--grid); border-bottom:1px solid var(--grid);
  min-height:680px;
}
.times{ display:grid; grid-auto-rows:24px; border-right:1px solid var(--grid); }
.timecell{ padding:2px 6px; color:var(--muted); font-size:12px; border-top:1px solid var(--grid); }
.timecell:first-child{ border-top:none; }

.day{ position:relative; display:grid; grid-auto-rows:24px; border-right:1px solid var(--grid); }
.day:last-child{ border-right:none; }
.slot{ border-top:1px solid var(--grid); }
.slot:nth-child(odd){ background:rgba(0,0,0,.01) }
@media (prefers-color-scheme: dark){
  .slot:nth-child(odd){ background:rgba(255,255,255,.02) }
}

/* イベント */
.event{
  position:absolute; left:6px; right:6px; border-radius:10px;
  padding:.28rem .45rem .34rem; color:#0b0b0c; font-weight:600;
  box-shadow:0 2px 6px rgba(0,0,0,.22); cursor:grab; user-select:none;
}
.event small{ display:block; font-weight:500; opacity:.85; }
.event .handle{ position:absolute; left:0; right:0; height:6px; cursor:n-resize; opacity:.6; }
.event .h-top{ top:-3px; } .event .h-btm{ bottom:-3px; }

/* 現在時刻ライン（今日の列にのみ表示） */
.nowline{
  position:absolute; left:80px; right:0; height:2px; background: #22d3ee;
  box-shadow:0 0 0 1px rgba(34,211,238,.25);
}

/* ダイアログ */
.dialog{ border:1px solid var(--grid); background:var(--panel); border-radius:14px; width:min(520px, 92vw); }
.form{ display:grid; gap:.6rem; padding:12px; }
.form input, .form select{ width:100%; padding:.5rem .6rem; border:1px solid var(--grid); border-radius:10px; background:transparent; color:var(--fg); }
.grid2{ display:grid; grid-template-columns:1fr 1fr; gap:.6rem; }
.actions{ display:flex; justify-content:flex-end; gap:.5rem; margin-top:.25rem; }

.hint{ margin:.5rem 0 0; color:var(--muted); font-size:.9rem }

/* 検索結果 */
.results{ margin-top:.4rem; display:grid; gap:.5rem; max-height:50vh; overflow:auto; }
.result-item{
  display:flex; justify-content:space-between; align-items:center;
  gap:.8rem; padding:.6rem .8rem; border:1px solid var(--grid); border-radius:12px;
}
.pick label{ display:inline-flex; gap:.4rem; align-items:center; margin-right:.6rem; }

/* ===== カレンダーページ固有のレイアウト調整 ===== */

/* ページ全体の余白と幅 */
body.calendar-page .wrap{
  max-width: 1100px;
  margin: 0 auto;
  padding: 32px 20px 40px;
}

/* カレンダーを載せるカードをフル幅にする（base.css の max-width:600px を上書き） */
body.calendar-page .calendar-wrap.card{
  max-width: none;
  width: 100%;
  padding: 16px 16px 12px;
}

/* タイトルとツールバーの間隔を少しだけ詰める */
body.calendar-page .page-title{
  margin-bottom: 8px;
}

/* ツールバーを画面幅いっぱいに気持ちよく広げる */
body.calendar-page .cal-toolbar{
  margin-bottom: 12px;
}

/* カレンダー自体もカードの中で左右いっぱいに広げる */
body.calendar-page .calendar{
  width: 100%;
}

/* PC では少し背の高いカードにして「Energy Map」と同じくらいのボリューム感に */
@media (min-width: 960px){
  body.calendar-page .calendar-wrap.card{
    min-height: 680px;
  }
}
