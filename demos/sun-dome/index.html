<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Local Sun Dome | Mochitecture Demos</title>
  <meta name="description" content="現在地とローカル時刻から、太陽高度・方位角と日の出／日の入りを24時間グラフで眺めるデモ。">
  <link rel="icon" href="/mochitecture_icon.png">
  <link rel="stylesheet" href="/assets/base.css">
  <link rel="stylesheet" href="/demos/sun-dome/styles.css">
  <script src="/assets/include.js" defer></script>
  <script src="/demos/sun-dome/app.js" defer></script>
</head>
<body class="sun-dome-page">
  <div data-include="/partials/header.html"></div>

  <main class="site-main">
    <div class="wrap sun-dome-wrap">
      <header class="sun-header">
        <h1 class="sun-title">Local Sun Dome</h1>
        <p class="sun-subtitle">
          現在地とローカル時刻から、太陽の位置と日の出／日の入りを24時間グラフで眺めるミニデモ。
        </p>
      </header>

      <section class="sun-layout">
        <!-- 左：現在の情報 -->
        <div class="sun-info-panel">
          <div class="sun-info-card">
            <div class="sun-info-header">
              <h2 class="sun-section-title">NOW</h2>
              <p class="sun-info-caption" id="sunInfoCaption">
                位置情報を取得すると、この場所の太陽位置を表示します。
              </p>
            </div>

            <div class="sun-row">
              <div class="sun-field">
                <span class="sun-label-key">現在地</span>
                <span class="sun-label-val" id="sunLocation">取得中...</span>
              </div>
            </div>

            <div class="sun-row sun-row-inline">
              <div class="sun-field">
                <span class="sun-label-key">日付</span>
                <span class="sun-label-val" id="sunLocalDate">--------</span>
              </div>
              <div class="sun-field">
                <span class="sun-label-key">ローカル時刻</span>
                <span class="sun-label-val" id="sunLocalTime">--:--</span>
              </div>
            </div>

            <div class="sun-grid">
              <div class="sun-field">
                <span class="sun-label-key">太陽高度</span>
                <span class="sun-label-val" id="sunElevation">-- °</span>
              </div>
              <div class="sun-field">
                <span class="sun-label-key">太陽方位角</span>
                <span class="sun-label-val">
                  <span id="sunAzimuth">-- °</span>
                  <span class="sun-az-dir" id="sunAzimuthDir"></span>
                </span>
              </div>
              <div class="sun-field">
                <span class="sun-label-key">日の出</span>
                <span class="sun-label-val" id="sunSunrise">--:--</span>
              </div>
              <div class="sun-field">
                <span class="sun-label-key">日の入り</span>
                <span class="sun-label-val" id="sunSunset">--:--</span>
              </div>
            </div>

            <div class="sun-actions">
              <button type="button" class="btn" id="sunRefreshBtn">
                現在地を再取得
              </button>
            </div>

            <p class="sun-message" id="sunMessage"></p>
          </div>

          <div class="sun-info-card sun-meta-card">
            <h2 class="sun-section-title">About this demo</h2>
            <p class="sun-meta-text">
              ブラウザの Geolocation API で取得した緯度・経度とローカル時刻を、独立した Sun API
              （SPA ベースの太陽位置計算）に送り、返ってきた太陽高度・方位角と日の出／日の入り時刻を
              24時間グラフとして描画しています。エネルギーや日射のイメージ補助のためのライトな可視化です。
            </p>
            <p class="sun-meta-text sun-meta-note">
              ※ 実際の天文用途には利用しないでください。数分程度の誤差を含む近似値です。
            </p>
          </div>
        </div>

        <!-- 右：24時間グラフ -->
        <div class="sun-chart-panel">
          <div class="sun-chart-card">
            <div class="sun-chart-header">
              <h2 class="sun-section-title">24時間の太陽軌道</h2>
              <div class="sun-chart-legend">
                <span class="sun-legend-dot sun-legend-elev"></span>
                <span class="sun-legend-label">太陽高度 (°)</span>
                <span class="sun-legend-dot sun-legend-az"></span>
                <span class="sun-legend-label">太陽方位角 (°)</span>
              </div>
            </div>

            <div class="sun-chart-wrapper">
              <svg
                id="sunChart"
                class="sun-chart-svg"
                viewBox="0 0 420 200"
                role="img"
                aria-label="24時間の太陽高度・方位角グラフ"
              >
                <!-- 軸は JS 側で描画 -->
              </svg>
              <div class="sun-tooltip" id="sunTooltip" hidden>
                <div class="sun-tooltip-time" id="sunTooltipTime"></div>
                <div class="sun-tooltip-row">
                  <span class="sun-tooltip-mark sun-tooltip-mark-elev"></span>
                  <span>高度</span>
                  <span class="sun-tooltip-val" id="sunTooltipElev"></span>
                </div>
                <div class="sun-tooltip-row">
                  <span class="sun-tooltip-mark sun-tooltip-mark-az"></span>
                  <span>方位</span>
                  <span class="sun-tooltip-val" id="sunTooltipAz"></span>
                </div>
                <div class="sun-tooltip-row sun-tooltip-dir-row">
                  <span>方角</span>
                  <span class="sun-tooltip-val" id="sunTooltipDir"></span>
                </div>
              </div>
            </div>

            <p class="sun-note">
              グラフは 1 分刻みのデータを使用しています。線の形状とおおよその時間帯を見るためのラフな表示です。
            </p>
          </div>
        </div>
      </section>
    </div>
  </main>

  <div data-include="/partials/footer.html"></div>
</body>
</html>
